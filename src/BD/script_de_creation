-- supprime toutes les tables existantes pour ne pas avoir de doublon
DROP TABLE if exists CLIENT;
DROP TABLE if exists CD;
DROP TABLE if exists PANIER;
DROP TABLE if exists COMMANDE;

-- Cr√©ation des tables
CREATE TABLE if not exists CLIENT (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    PRENOM VARCHAR(50) NOT NULL,
    NOM VARCHAR(55) NOT NULL,
    EMAIL VARCHAR(255) NOT NULL,
    MOT_DE_PASSE VARCHAR(255) NOT NULL
);

CREATE TABLE if not exists CD (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    TITRE VARCHAR(255) NOT NULL,
    ARTISTE VARCHAR(255) NOT NULL,
    IMAGE VARCHAR(255) NOT NULL,
    PRIX DECIMAL(6,2) NOT NULL,
    GENRE VARCHAR(255) NOT NULL,
    QUANTITE INTEGER NOT NULL,
    FOREIGN KEY (GENRE) REFERENCES GENRE(NOM)
);

CREATE TABLE if not exists PANIER
(
    ID_CLIENT INTEGER NOT NULL,
    ID_CD INTEGER NOT NULL,
    QUANTITE INTEGER NOT NULL,
    FOREIGN KEY (ID_CLIENT) REFERENCES CLIENT (ID),
    FOREIGN KEY (ID_CD) REFERENCES CD (ID),
    PRIMARY KEY (ID_CLIENT, ID_CD)
);

CREATE TABLE if not exists COMMANDE (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    DATE DATE NOT NULL,
    ID_CLIENT INTEGER NOT NULL,
    FOREIGN KEY (ID_CLIENT) REFERENCES CLIENT(ID)
);